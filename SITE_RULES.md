⚠️ 重要規定（必讀）

任何人（包含 ChatGPT / Codex / 未來的我）在修改本專案前，
必須先完整閱讀本檔案（SITE_RULES.md）與 RELEASE_CHECKLIST.md。

未遵守以下規則的修改，視為無效，請撤回後重新修改。

---

# SITE RULES — scottnick.github.io

> 類別系統是「全站的」；  
> C++ 學習筆記只是類別系統的一個使用者，並且有自己的過濾規則。

---

## 1) 類別系統（Categories / Index）總原則

### 類別索引來源
- 類別索引是從「全站所有文章頁面」內的 `.post-tag` 元素建立
- 只要是文章頁面，且有 `.post-tag`，就會被納入類別索引

### 全站索引範圍（重要）
- 預設索引範圍：**全站所有文章**
- 包含但不限於：
  - `/cpp-notes/`
  - `/home/`
  - `/notes/`
  - 其他獨立文章頁（例如經驗分享、學習心得）

### 非 C++ 文章
- 非 C++ 的文章（例如 `home/ntu-math-special.html`）
- 只要有 `.post-tag`，就應該正常出現在類別系統中
- 這些文章不受 C++ 學習筆記的過濾規則影響

---

## 2) C++ 學習筆記的特殊規則（關鍵）

### 類別頁面的顯示範圍
- **只有在 C++ 學習筆記相關頁面中**（例如 category.html）
- 類別文章清單才有額外限制

### C++ 類別頁的預設規則
- 預設只顯示來源為：
  - `/cpp-notes/all problems/` 內的文章
- 其他 C++ 子資料夾（例如 grind75 / leetcode75 / neetcode150 / contests...）：
  - 預設不會顯示在 C++ 類別文章清單中
  - 除非我明確指定要納入

---

## 3) 新增文章的基本規範（重要）

### 新增文章的語意定義
- 當我說：
  -「新增文章」
  -「新增文章頁面」
  -「新增一篇題解」
  -「新增某題的文章」
- 預設意思為：
  **依照既有文章（Two Sum）的格式，新建一篇完整文章頁面**

若只需要修改既有文章，我會明確說「修改文章」或「更新內容」。

---

### 每一篇新文章必須包含（以 Two Sum 為標準）
- 文章本體內容（解題說明 / 經驗說明）
- 文章資訊區塊（例如：題號、標題、分類、標籤）
- 文章目錄（TOC，若文章長度足夠）
- `.post-tag`（供類別系統索引使用）

> 若新增文章不符合上述結構，視為不完整文章，不應被納入類別系統。

---

## 4) C++ 筆記文章放置規範（關鍵）

### all problems 為「必定收錄」資料夾
- **所有 C++ 解題類文章**
  - 預設「一定要新增在 `cpp-notes/all problems/`」
- 除非我明確說明：
  -「只要新增在某某資料夾」
  -「不要放進 all problems」
否則：
- **all problems 一定要新增**
- 其他資料夾（grind75 / neetcode150 / contests 等）只是「額外分類」

---

### 多資料夾新增規則
- 若我指定新增文章到某個資料夾（例如 grind75）：
  - 仍需同時在 `all problems` 中新增對應文章
- all problems 為主索引來源
- 其他資料夾視為「主題整理 / 子分類」

---

### 重複題號處理規則（重要）
- 若在新增文章時：
  - `cpp-notes/all problems/` 中 **已存在相同題號的文章**
- 則：
  - **不需要再次在 all problems 中新增**
  - 可只新增到指定的其他資料夾（若有說明）

> all problems 中，同一題號最多只會有一篇文章。

---

## 5) 排序規則（C++ 系統）

### all problems 資料夾
- 文章排序依「題號數字」由小到大
  - 例：1, 2, 15, 88, 392, ...

### 非 all problems 的文章
- 預設排序在 all problems 文章之後
- 若需要特殊排序（例如時間優先、置頂），需另外說明並修改程式邏輯

---

## 6) 類別與計數索引（自動化規則）

### 1) 索引來源（唯一真相）
- 全站類別與文章計數的資料來源為：`/site-index.json`
- 前端頁面（categories.html / category.html / cpp.html）只讀取 `site-index.json` 來計算，不再於 runtime 呼叫 GitHub API 掃描 repo。

### 2) 自動更新時機（改版更新一次）
- `site-index.json` 由 GitHub Actions 在每次 push 到 main 後自動重新產生並提交更新。
- 因此：新增/修改文章後，只要成功推到 main 並完成 Actions，類別與數量就會自動更新。

### 3) 文章被索引的必要條件（類別標準）
- 文章頁面必須包含 `.post-tag` 類別標籤（文章資訊區塊顯示用的那些 tags）。
- 沒有 `.post-tag` 的頁面不視為可索引文章。

### 4) C++ 學習筆記的特殊範圍規則
- 全站類別計算：包含所有文章頁面（如 home/xxx.html 也算）。
- 但「C++ 學習筆記」相關的類別/文章計數（scope=cpp-notes）僅計算 `cpp-notes/all problems/` 內的文章。
