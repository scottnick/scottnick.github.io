⚠️ 重要規定（必讀）

任何人（包含 ChatGPT / Codex / 未來的我）在修改本專案前，
必須先完整閱讀本檔案（SITE_RULES.md）與 RELEASE_CHECKLIST.md。

未遵守以下規則的修改，視為無效，請撤回後重新修改。

---

# SITE RULES — scottnick.github.io

> 類別系統是「全站的」；  
> C++ 學習筆記只是類別系統的一個使用者，並且有自己的過濾規則。

---

## 0) 本檔案是「網站法律」（必遵守）

### 0.1 用語定義
- 我說的「法律 / 網站規則 / 規定」= **執行任何修改時一定要遵守的規矩**
- 本檔案（SITE_RULES.md）是全站唯一的規則來源之一，優先級最高
- RELEASE_CHECKLIST.md 是每次改版/發布前的驗收流程（必做）

### 0.2 修改本專案的標準執行程序（任何人都必須照做）
1. 修改前：完整閱讀
   - `SITE_RULES.md`
   - `RELEASE_CHECKLIST.md`
2. 修改中：所有改動必須符合本法律
3. 修改後：必須完成驗收（見 RELEASE_CHECKLIST 與本檔各節的「驗收條件」）
4. 未遵守：視為無效修改
   - 必須撤回（revert）或重新修改直到符合規則

### 0.3 本法律適用範圍
- 包含但不限於：新增頁面、修改 JS/CSS、改資料夾/檔名、調整索引規則、更新 assets、修改類別系統等

---

## 1) 類別系統（Categories / Index）總原則

### 類別索引來源
- 類別索引是從「全站所有文章頁面」內的 `.post-tag` 元素建立
- 只要是文章頁面，且有 `.post-tag`，就會被納入類別索引

### 全站索引範圍（重要）
- 預設索引範圍：**全站所有文章**
- 包含但不限於：
  - `/cpp-notes/`
  - `/home/`
  - `/notes/`
  - 其他獨立文章頁（例如經驗分享、學習心得）

### 非 C++ 文章
- 非 C++ 的文章（例如 `home/ntu-math-special.html`）
- 只要有 `.post-tag`，就應該正常出現在類別系統中
- 這些文章不受 C++ 學習筆記的過濾規則影響

---

## 2) C++ 學習筆記的特殊規則（關鍵）

### 類別頁面的顯示範圍
- **只有在 C++ 學習筆記相關頁面中**（例如 category.html）
- 類別文章清單才有額外限制

### C++ 類別頁的預設規則
- 預設只顯示來源為：
  - `/cpp-notes/all problems/` 內的文章
- 其他 C++ 子資料夾（例如 grind75 / leetcode75 / neetcode150 / contests...）：
  - 預設不會顯示在 C++ 類別文章清單中
  - 除非我明確指定要納入

---

## 3) 新增文章的基本規範（重要）

### 新增文章的語意定義
- 當我說：
  -「新增文章」
  -「新增文章頁面」
  -「新增一篇題解」
  -「新增某題的文章」
- 預設意思為：
  **依照既有文章（Two Sum）的格式，新建一篇完整文章頁面**

若只需要修改既有文章，我會明確說「修改文章」或「更新內容」。

---

### 每一篇新文章必須包含（以 Two Sum 為標準）
- 文章本體內容（解題說明 / 經驗說明）
- 文章資訊區塊（例如：題號、標題、分類、標籤）
- 文章目錄（TOC，若文章長度足夠）
- `.post-tag`（供類別系統索引使用）

> 若新增文章不符合上述結構，視為不完整文章，不應被納入類別系統。

---

## 4) C++ 筆記文章放置規範（關鍵）

### all problems 為「必定收錄」資料夾
- **所有 C++ 解題類文章**
  - 預設「一定要新增在 `cpp-notes/all problems/`」
- 除非我明確說明：
  -「只要新增在某某資料夾」
  -「不要放進 all problems」
否則：
- **all problems 一定要新增**
- 其他資料夾（grind75 / neetcode150 / contests 等）只是「額外分類」

---

### 多資料夾新增規則
- 若我指定新增文章到某個資料夾（例如 grind75）：
  - 仍需同時在 `all problems` 中新增對應文章
- all problems 為主索引來源
- 其他資料夾視為「主題整理 / 子分類」

---

### 重複題號處理規則（重要）
- 若在新增文章時：
  - `cpp-notes/all problems/` 中 **已存在相同題號的文章**
- 則：
  - **不需要再次在 all problems 中新增**
  - 可只新增到指定的其他資料夾（若有說明）

> all problems 中，同一題號最多只會有一篇文章。

---

## 5) 排序規則（C++ 系統）

### all problems 資料夾
- 文章排序依「題號數字」由小到大
  - 例：1, 2, 15, 88, 392, ...

### 非 all problems 的文章
- 預設排序在 all problems 文章之後
- 若需要特殊排序（例如時間優先、置頂），需另外說明並修改程式邏輯

---

## 6) 類別與計數索引（自動化規則）

### 1) 索引來源（唯一真相）
- 全站類別與文章計數的資料來源為：`/site-index.json`
- 前端頁面（categories.html / category.html / cpp.html）只讀取 `site-index.json` 來計算，不再於 runtime 呼叫 GitHub API 掃描 repo。

### 2) 自動更新時機（改版更新一次）
- `site-index.json` 由 GitHub Actions 在每次 push 到 main 後自動重新產生並提交更新。
- 因此：新增/修改文章後，只要成功推到 main 並完成 Actions，類別與數量就會自動更新。

### 3) 文章被索引的必要條件（類別標準）
- 文章頁面必須包含 `.post-tag` 類別標籤（文章資訊區塊顯示用的那些 tags）。
- 沒有 `.post-tag` 的頁面不視為可索引文章。

### 4) C++ 學習筆記的特殊範圍規則
- 全站類別計算：包含所有文章頁面（如 home/xxx.html 也算）。
- 但「C++ 學習筆記」相關的類別/文章計數（scope=cpp-notes）僅計算 `cpp-notes/all problems/` 內的文章。

---

## 7) 靜態資源規則（Assets / Hero / Avatar）

> 目的：避免「改名/搬位置」後全站圖片失效，也讓未來新增 Hero 圖片有固定規格可依循。

### 7.1 資源統一位置（唯一規範）
- 全站共用圖片與靜態資源一律放在：`/assets/`
- 禁止把共用圖片散落在 `home/`、`cpp-notes/`、`notes/` 等子資料夾中

### 7.2 路徑引用規則（必遵守）
- 所有頁面引用圖片一律用 **root-absolute** 路徑：
  - ✅ `/assets/hero-1.jpg`
  - ✅ `/assets/avatar.jpg`
- 禁止使用相對路徑（會在子資料夾頁面失效）：
  - ❌ `assets/hero-1.jpg`
  - ❌ `../assets/avatar.jpg`

### 7.3 Hero 圖片命名規則（首頁全螢幕大圖）
- Hero 輪播圖片固定命名：
  - `/assets/hero-1.jpg`
  - `/assets/hero-2.jpg`
  - `/assets/hero-3.jpg`
- 若未來新增更多張，沿用：
  - `/assets/hero-4.jpg`、`/assets/hero-5.jpg` ……

> 規則：**檔名與路徑優先固定**；更換圖片內容可以，但不要改命名規則，避免每次都要改前端程式。

### 7.4 Avatar 命名規則（個人檔案頭像）
- 個人頭像固定命名：
  - `/assets/avatar.jpg`
- 允許換照片內容，但 **檔名與路徑不得改**

### 7.5 改名/搬移資源後的必做檢查（驗收條件）
任何修改 assets（新增/刪除/改名/搬位置）後，必須做到：
1. 全 repo 搜尋舊檔名（例如 `hero-` / `avatar`）確保沒有殘留引用
2. 確認所有引用都是 `/assets/...`
3. 部署後以 Ctrl+F5 強制刷新確認圖片正常顯示

---

## 8) 文章頁面規格（以 Two Sum 為唯一標準）

> 目的：確保任何新文章看起來、結構與資訊都一致，並且一定能被類別系統索引。

### 8.1 文章頁面定義
- 任何希望被 `site-index.json` 納入的頁面，都必須符合本節規格
- 不符合者視為「非文章頁」，不得納入類別系統與分類統計

### 8.2 必備結構（必遵守）
每一篇文章必須具備（以 Two Sum 為標準）：
1. **文章內容區**（解題說明/心得/整理）
2. **目錄 TOC**（文章長度足夠時要有；格式與 Two Sum 一致）
3. **文章資訊區塊（文章資訊）**：必須放在文章下方，長得要像 Two Sum 的「文章資訊」卡片

### 8.3 「文章資訊」區塊必填欄位（跟 Two Sum 一樣）
文章底部的「文章資訊」必須包含：
- 作者（例如 scottnick）
- 撰寫日期（或更新日期，至少要有一個日期欄位）
- 類別/標籤（以 badge 顯示，且每個標籤同時是 `.post-tag`）
- 原文連結（本篇文章的永久網址）

> 規則：新增文章時 **一定要補齊文章資訊**，否則視為不完整文章。

### 8.4 `.post-tag` 規則（類別索引唯一標準）
- 每篇文章必須至少有 1 個 `.post-tag`
- `.post-tag` 文字必須乾淨（避免多餘空白/奇怪符號）
- 可多標籤（代表多分類）
- 沒有 `.post-tag` 的頁面不納入類別系統

### 8.5 新增文章後的驗收條件（Checklist）
新增文章後必須確認：
1. 文章頁可正常開啟（無 404）
2. 文章底部「文章資訊」完整（作者/日期/標籤/原文連結）
3. `.post-tag` 存在且正確

4. 【法律】新增文章後必須觸發 6-2 自動更新流程  
   - 必須 push 到 `main`
   - 必須確保 GitHub Actions 有成功執行
   - 必須確保 `site-index.json` 已被 Actions 重新產生並更新（提交到 repo）
   - 若 Actions 失敗或 `site-index.json` 未更新：本次「新增文章」視為未完成，必須修到成功為止

5. 類別頁與計數能找到此文章（以 `site-index.json` 為唯一真相）
6. Ctrl+F5 強制刷新後仍顯示正常（避免快取造成誤判）

