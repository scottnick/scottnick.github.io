⚠️ 重要規定（必讀）

任何人（包含 ChatGPT / Codex / 未來的我）在修改本專案前，
必須先完整閱讀本檔案（SITE_RULES.md）與 RELEASE_CHECKLIST.md。

未遵守以下規則的修改，視為無效，請撤回後重新修改。

---

# SITE RULES — scottnick.github.io

> 類別系統是「全站的」；  
> C++ 學習筆記只是類別系統的一個使用者，並且有自己的過濾規則。

---

## 0) 本檔案是「網站法律」（必遵守）

### 0.1 用語定義
- 我說的「法律 / 網站規則 / 規定」= **執行任何修改時一定要遵守的規矩**
- 本檔案（SITE_RULES.md）是全站唯一的規則來源之一，優先級最高
- RELEASE_CHECKLIST.md 是每次改版/發布前的驗收流程（必做）

### 0.2 修改本專案的標準執行程序（任何人都必須照做）
1. 修改前：完整閱讀
   - `SITE_RULES.md`
   - `RELEASE_CHECKLIST.md`
2. 修改中：所有改動必須符合本法律
3. 修改後：必須完成驗收（見 RELEASE_CHECKLIST 與本檔各節的「驗收條件」）
4. 未遵守：視為無效修改
   - 必須撤回（revert）或重新修改直到符合規則

### 0.3 本法律適用範圍
- 包含但不限於：新增頁面、修改 JS/CSS、改資料夾/檔名、調整索引規則、更新 assets、修改類別系統等

---

## 1) 類別系統（Categories / Index）總原則

### 類別索引來源
- 類別索引是從「全站所有文章頁面」內的 `.post-tag` 元素建立
- 只要是文章頁面，且有 `.post-tag`，就會被納入類別索引

### 全站索引範圍（重要）
- 預設索引範圍：**全站所有文章**
- 包含但不限於：
  - `/cpp-notes/`
  - `/home/`
  - `/notes/`
  - 其他獨立文章頁（例如經驗分享、學習心得）

### 非 C++ 文章
- 非 C++ 的文章（例如 `home/ntu-math-special.html`）
- 只要有 `.post-tag`，就應該正常出現在類別系統中
- 這些文章不受 C++ 學習筆記的過濾規則影響

---

## 2) C++ 學習筆記的特殊規則（關鍵）

### 類別頁面的顯示範圍
- **只有在 C++ 學習筆記相關頁面中**（例如 category.html）
- 類別文章清單才有額外限制

### C++ 類別頁的預設規則
- 預設只顯示來源為：
  - `/cpp-notes/all problems/` 內的文章
- 其他 C++ 子資料夾（例如 grind75 / leetcode75 / neetcode150 / contests...）：
  - 預設不會顯示在 C++ 類別文章清單中
  - 除非我明確指定要納入

---

## 3) 新增文章的基本規範（重要）

### 新增文章的語意定義
- 當我說：
  -「新增文章」
  -「新增文章頁面」
  -「新增一篇題解」
  -「新增某題的文章」
- 預設意思為：
  **依照既有文章（Two Sum）的格式，新建一篇完整文章頁面**

若只需要修改既有文章，我會明確說「修改文章」或「更新內容」。

---

### 每一篇新文章必須包含（以 Two Sum 為標準）
- 文章本體內容（解題說明 / 經驗說明）
- 文章資訊區塊（例如：題號、標題、分類、標籤）
- 文章目錄（TOC，若文章長度足夠）
- `.post-tag`（供類別系統索引使用）

> 若新增文章不符合上述結構，視為不完整文章，不應被納入類別系統。

---

## 4) C++ 筆記文章放置規範（關鍵）

### all problems 為「必定收錄」資料夾
- **所有 C++ 解題類文章**
  - 預設「一定要新增在 `cpp-notes/all problems/`」
- 除非我明確說明：
  -「只要新增在某某資料夾」
  -「不要放進 all problems」
否則：
- **all problems 一定要新增**
- 其他資料夾（grind75 / neetcode150 / contests 等）只是「額外分類」

---

### 多資料夾新增規則
- 若我指定新增文章到某個資料夾（例如 grind75）：
  - 仍需同時在 `all problems` 中新增對應文章
- all problems 為主索引來源
- 其他資料夾視為「主題整理 / 子分類」

---

### 重複題號處理規則（重要）
- 若在新增文章時：
  - `cpp-notes/all problems/` 中 **已存在相同題號的文章**
- 則：
  - **不需要再次在 all problems 中新增**
  - 可只新增到指定的其他資料夾（若有說明）

> all problems 中，同一題號最多只會有一篇文章。

---

## 5) 排序規則（C++ 系統）

### all problems 資料夾
- 文章排序依「題號數字」由小到大
  - 例：1, 2, 15, 88, 392, ...

### 非 all problems 的文章
- 預設排序在 all problems 文章之後
- 若需要特殊排序（例如時間優先、置頂），需另外說明並修改程式邏輯

---

## 6) 類別與計數索引（自動化規則）

### 1) 索引來源（唯一真相）
- 全站類別與文章計數的資料來源為：`/site-index.json`
- 前端頁面（categories.html / category.html / cpp.html）只讀取 `site-index.json` 來計算，不再於 runtime 呼叫 GitHub API 掃描 repo。

### 2) 自動更新時機（改版更新一次）
- `site-index.json` 由 GitHub Actions 在每次 push 到 main 後自動重新產生並提交更新。
- 因此：新增/修改文章後，只要成功推到 main 並完成 Actions，類別與數量就會自動更新。

### 3) 文章被索引的必要條件（類別標準）
- 文章頁面必須包含 `.post-tag` 類別標籤（文章資訊區塊顯示用的那些 tags）。
- 沒有 `.post-tag` 的頁面不視為可索引文章。

### 4) C++ 學習筆記的特殊範圍規則
- 全站類別計算：包含所有文章頁面（如 home/xxx.html 也算）。
- 但「C++ 學習筆記」相關的類別/文章計數（scope=cpp-notes）僅計算 `cpp-notes/all problems/` 內的文章。

---

## 7) 靜態資源規則（Assets / Hero / Avatar）

> 目的：避免「改名/搬位置」後全站圖片失效，也讓未來新增 Hero 圖片有固定規格可依循。

### 7.1 資源統一位置（唯一規範）
- 全站共用圖片與靜態資源一律放在：`/assets/`
- 禁止把共用圖片散落在 `home/`、`cpp-notes/`、`notes/` 等子資料夾中

### 7.2 路徑引用規則（必遵守）
- 所有頁面引用圖片一律用 **root-absolute** 路徑：
  - ✅ `/assets/hero-1.jpg`
  - ✅ `/assets/avatar.jpg`
- 禁止使用相對路徑（會在子資料夾頁面失效）：
  - ❌ `assets/hero-1.jpg`
  - ❌ `../assets/avatar.jpg`

### 7.3 Hero 圖片命名規則（首頁全螢幕大圖）
- Hero 輪播圖片固定命名：
  - `/assets/hero-1.jpg`
  - `/assets/hero-2.jpg`
  - `/assets/hero-3.jpg`
- 若未來新增更多張，沿用：
  - `/assets/hero-4.jpg`、`/assets/hero-5.jpg` ……

> 規則：**檔名與路徑優先固定**；更換圖片內容可以，但不要改命名規則，避免每次都要改前端程式。

### 7.4 Avatar 命名規則（個人檔案頭像）
- 個人頭像固定命名：
  - `/assets/avatar.jpg`
- 允許換照片內容，但 **檔名與路徑不得改**

### 7.5 改名/搬移資源後的必做檢查（驗收條件）
任何修改 assets（新增/刪除/改名/搬位置）後，必須做到：
1. 全 repo 搜尋舊檔名（例如 `hero-` / `avatar`）確保沒有殘留引用
2. 確認所有引用都是 `/assets/...`
3. 部署後以 Ctrl+F5 強制刷新確認圖片正常顯示

---

## 8) 文章頁面規格（以 Two Sum 為唯一標準）

> 目的：確保任何新文章看起來、結構與資訊都一致，並且一定能被類別系統索引。

### 8.1 文章頁面定義
- 任何希望被 `site-index.json` 納入的頁面，都必須符合本節規格
- 不符合者視為「非文章頁」，不得納入類別系統與分類統計

### 8.2 必備結構（必遵守）
每一篇文章必須具備（以 Two Sum 為標準）：
1. **文章內容區**（解題說明/心得/整理）
2. **目錄 TOC**（文章長度足夠時要有；格式與 Two Sum 一致）
3. **文章資訊區塊（文章資訊）**：必須放在文章下方，長得要像 Two Sum 的「文章資訊」卡片

### 8.3 「文章資訊」區塊必填欄位（跟 Two Sum 一樣）
文章底部的「文章資訊」必須包含：
- 作者（例如 scottnick）
- 撰寫日期（或更新日期，至少要有一個日期欄位）
- 類別/標籤（以 badge 顯示，且每個標籤同時是 `.post-tag`）
- 原文連結（本篇文章的永久網址）

> 規則：新增文章時 **一定要補齊文章資訊**，否則視為不完整文章。

### 8.4 `.post-tag` 規則（類別索引唯一標準）
- 每篇文章必須至少有 1 個 `.post-tag`
- `.post-tag` 文字必須乾淨（避免多餘空白/奇怪符號）
- 可多標籤（代表多分類）
- 沒有 `.post-tag` 的頁面不納入類別系統

### 8.5 新增文章後的驗收條件（Checklist）
新增文章後必須確認：
1. 文章頁可正常開啟（無 404）
2. 文章底部「文章資訊」完整（作者/日期/標籤/原文連結）
3. `.post-tag` 存在且正確

4. 【法律】新增文章後必須觸發 6-2 自動更新流程  
   - 必須 push 到 `main`
   - 必須確保 GitHub Actions 有成功執行
   - 必須確保 `site-index.json` 已被 Actions 重新產生並更新（提交到 repo）
   - 若 Actions 失敗或 `site-index.json` 未更新：本次「新增文章」視為未完成，必須修到成功為止

5. 類別頁與計數能找到此文章（以 `site-index.json` 為唯一真相）
6. Ctrl+F5 強制刷新後仍顯示正常（避免快取造成誤判）

---

## 9) 文章頁面內容輸入格式（HackMD → 網站文章頁）【新增法律】

### 9.0 最高優先級規則（必遵守）
- **我上船的格式請完全遵守，不要自己刪除文字或修正。**
- 「上船格式」包含但不限於：
  - 標題文字、段落順序、換行、空白行
  - `# / ## / ### / ####`
  - `---`
  - `**粗體**`
  - `` `inline code` ``
  - `>` 引用
  - `- / *` 清單
  - 程式碼區塊 ``` ```
  - emoji（📘🧠🪜等）
  - 文末連結原文（直接貼 URL 也要保留）
- 允許做的事情只有：
  - **把 HackMD 語法「呈現在網頁上」**（轉成對應的 HTML/樣式）
  - **補上網站必要的固定區塊**（例如文章資訊區塊、站內導覽、TOC 容器）
- 不允許做的事情：
  - 改寫句子、補字、刪字、修正文案、重排內容
  - 把你原本寫的段落合併/拆開
  - 把你寫的標題層級改掉（例如把 `###` 改成 `##`）

---

### 9.1 文章原始稿來源
- 我新增/撰寫文章內容時，預設會用 **HackMD 的 Markdown 語法**輸入（我稱為「Hack 格式」）。
- 網站文章頁必須支援並正確轉換/呈現 HackMD 語法（至少支援本節列出的規則）。

---

### 9.2 標題層級與目錄（TOC）規則（必遵守）
- `#`（h1）是標題
- `##`（h2）顯示在目錄
- `###`（h3）`####`（h4）就不顯示在目錄
- 目錄只收錄 `##`，其他層級不收錄

---

### 9.3 分隔線規則（必遵守）
- `---` 是分隔線
- 文章內出現的 `---` 必須原樣保留並呈現為分隔線

---

### 9.4 文字語法規則（HackMD 原樣保留）
以下語法都視為 HackMD 標準輸入，必須原樣顯示語意（不改內容）：
- `**粗體**`
- `*斜體*`
- `` `inline code` ``
- `~~刪除線~~`（若原稿有寫就保留）

---

### 9.5 清單語法規則（HackMD 原樣保留）
- `-` / `*`：無序清單
- `1.`：有序清單
- 支援巢狀清單（縮排 2 或 4 spaces）
- 清單內容不得自動重排或合併

---

### 9.6 引用語法規則（HackMD 原樣保留）
- `>`：引用區塊
- 引用區塊內容必須原樣保留，不得拆段或改寫

---

### 9.7 程式碼語法規則（必遵守）
- 三個反引號 ``` 包住的區塊為程式碼區塊
- 範例：
```cpp
class Solution {
public:
    ...
};
````

* 必須保留：

  * 原本縮排
  * 原本換行
  * 原本內容（不得改寫變數名、不得加註解、不得修正 code）
* 程式碼區塊前後建議保留空行（但不得因排版理由刪改原稿內容）

---

### 9.8 連結規則（HackMD 原樣保留）

* 原稿可直接貼 URL（HackMD 風格）
* 網站可將其轉成可點擊連結，但不得刪除或改寫 URL 文字

---

### 9.9（重要）網站固定區塊與 HackMD 原稿的分工

* HackMD 原稿屬於「文章本體」，必須原樣呈現
* 網站頁面可以額外補上固定區塊（例如）：

  * TOC 容器（目錄）
  * 文章資訊區塊（跟 Two Sum 一樣，放在文章底部）
  * 站內導覽 / 頁首 / 頁尾
* 但任何固定區塊都**不能修改或覆蓋**你原稿的內容

---

### 9.10 轉換注意事項（避免常見錯誤）

* 標題不要跳層：`#` → `##` → `###`（不要直接 `#` 接 `###`）
* 程式碼區塊前後要留空行，避免被吃掉
* 清單與段落之間要留空行，避免排版黏在一起
* emoji 允許存在，但不可影響 TOC 解析

---

### 9.11（新增）新增文章時必須納入索引更新流程（對應第 6.2 法律）

* 新增文章後，必須遵守第 6 節的索引流程：

  * 文章頁面必須包含 `.post-tag`
  * `site-index.json` 為唯一真相
  * push 到 main 後由 GitHub Actions 自動重新產生並提交更新
* 也就是：**新增文章時，要符合「6-2 那條法律」的自動更新流程**

---

## 10) C++ 學習筆記文章固定格式（HackMD 原稿法律）【新增法律】

> 本節規定 C++ 學習筆記（cpp-notes）文章的「固定大標題結構」與「常見小節」。
> 目的：讓每篇題解的閱讀體驗一致、TOC 一致、未來自動化（索引/目錄/解析）不會壞。
> ⚠️ 依 9.0：我上船的格式請完全遵守，不要自己刪除文字或修正。

---

### 10.1 標題層級法律（TOC 行為固定）

* `#`（h1）：本篇題解的主標題（題號 + 題名）

  * 規則：每篇文章只能有一個 `#`
* `##`（h2）：固定大段落，**會出現在目錄（TOC）**
* `###`（h3）：段落內的小節，**不出現在目錄（TOC）**
* `####`（h4）：更細的小節，**不出現在目錄（TOC）**

> 結論：C++ 題解文章的 TOC 只收 `##`，因此 `##` 必須保持固定段落名稱與順序。

---

### 10.2 C++ 題解文章「固定摘要區（標題下方）」規則（必遵守）

在 `# 主標題` 下方必須放固定摘要欄位（順序固定）：

**練習日期：** YYYY-MM-DD
**難度：** Easy / Medium / Hard
**類型：** 以頓號 `、` 分隔（例：Sliding Window、Two Pointers、Array）

> 摘要區屬於 HackMD 原稿的一部分，必須原樣保留（見 9.0）。

---

### 10.3 C++ 題解文章「固定大段落（##）」規則（必遵守）

每篇 C++ 題解文章，預設必須包含以下 `##` 大段落（順序建議固定）：

1. `## 📘 題目敘述`
2. `## 🧠 解題思路`
3. `## 🪜 主要流程步驟`
4. `## 💻 程式碼實作`
5. `## 🔗 題目連結`

> 若某篇文章不適合某段落（例如無流程步驟），可以省略，但不得把 `##` 改成 `###`，也不得更改既有段落文字（避免 TOC/解析規則失效）。

---

### 10.4 「固定小節（###）」規則（常見、建議固定）

#### A) 在 `## 📘 題目敘述` 之下（建議）

* `### 條件限制`

  * 以無序清單 `*` 列出 constraints
  * constraints 內容依題目原文為準，原樣呈現

#### B) 在 `## 🧠 解題思路` 之下（建議）

* `### 所有變數`

  * 以無序清單 `*` 列出變數與用途
  * 變數命名需與程式碼一致（不得改寫）
* （可選）可使用 `> 引用` 放一句「核心不變式 / 關鍵句」

#### C) 在 `## 🪜 主要流程步驟` 之下（建議）

* 固定使用 `### 1. ...`、`### 2. ...`、`### 3. ...` 的步驟形式
* 每個步驟之間可使用 `---` 分隔線（原樣保留）
* 若有「重點公式/關鍵更新」，用行內 code 或短 code block 表示（不得改內容）

#### D) 在 `## 💻 程式碼實作` 之下（必遵守）

* 必須提供完整可提交的 C++ 程式碼區塊
* 程式碼使用：

```cpp
...
```

* 程式碼內容不得因「排版/修正」被更動（見 9.7）

---

### 10.5 分隔線使用規則（---）

* `---` 用於步驟段落之間的視覺分隔
* 文章內出現的 `---` 必須原樣保留並呈現為分隔線
* 不得自動刪除、合併或替換分隔線

---

### 10.6 文章固定語法與符號（HackMD 原樣保留）

* `**粗體**`：常用於摘要欄位（練習日期/難度/類型）
* `` `inline code` ``：用於變數、公式、陣列名、區間表示
* `>`：用於「不變式 / 核心重點」的引用區塊
* `*`：用於清單（constraints、變數列表、重點列點）
* emoji（📘🧠🪜💻🔗）允許存在，且段落文字固定建議沿用

---

### 10.7 文章新增的索引法律（對應 6.2）

* 新增任何文章頁面（C++ 題解）後：

  * 必須 push 到 `main`
  * 必須確保 GitHub Actions 成功
  * 必須確保 `site-index.json` 已被 Actions 重新產生並更新（提交到 repo）
* 若 Actions 失敗或 `site-index.json` 未更新：新增文章視為未完成，必須修到成功為止

---

### 10.8（提醒）文章底部「文章資訊區塊」仍然必須存在

* HackMD 原稿是文章本體
* 網站頁面必須另外補上固定的「文章資訊區塊」（跟 Two Sum 一樣）
* HackMD 原稿中的摘要（練習日期/難度/類型）不能取代底部文章資訊區塊

